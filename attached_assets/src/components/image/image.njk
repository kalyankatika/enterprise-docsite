{% extends "src/templates/layouts/component-page.njk" %}

{# SET THE COMPONENT STATUS #}
{% set component_status = "Available" %}
{% set body_class="docsite-documentation-page--with-tabs docsite-documentation-page--fds-only"%}

{% block page__title %}
    {% filter markdown %}
    ##### Components
    # Image
    
    Image provides an easy way to display a responsive image styled to match the FDS standards

    {% endfilter %}
{% endblock %}

{% block examples_tab %}
    {% filter markdown %}
    ## Basic usage

    At a minimum, the `eds-src` attribute must be provided to display an image. For accessibility reasons, the `eds-alt-text` should also be included when possible.
    {% endfilter %}

    {{ library.eds_code_example_pair(
        example= '<eds-image
            eds-src="https://placehold.co/300x200?text=Default+Image"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
        ></eds-image>',
        example_label="basic usage",
        code_snippet_source='<eds-image
            eds-src="https://placehold.co/300x200?text=Default+Image"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
        ></eds-image>'
    ) }}

    {% filter markdown %}
    ## Caption text

    Caption text can be provided either as basic text using the `eds-caption-text` attribute or as HTML using the `caption` slot. Please note that HTML should not be passed in via the `eds-caption-text` attribute as it will not render properly.
    {% endfilter %}

    {% set caption_text_example_source %}
        <!-- Text caption -->
        <eds-image
            eds-src="https://placehold.co/300x200?text=Text+Caption"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
            eds-caption-text="This is a sample text caption for the Image Component."
        ></eds-image>

        <!-- Slotted caption -->
        <eds-image
            eds-src="https://placehold.co/300x200?text=HTML+Caption"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
        >
            <span slot="caption">
                This is a sample HTML caption for the Image Component.<sup><a href="#fn-01">&dagger;</a></sup>
            </span>
        </eds-image>
    {% endset %}

    {{ library.eds_code_example_pair(
        examples=[
            {
                example: '<eds-image
                    eds-src="https://placehold.co/300x200?text=Text+Caption"
                    eds-alt-text="An example placeholder image"
                    eds-width="300"
                    eds-height="200"
                    eds-caption-text="This is a sample text caption for the Image Component."
                ></eds-image>',
                label: "Text caption"
            },
            {
                example: '<eds-image
                    eds-src="https://placehold.co/300x200?text=HTML+Caption"
                    eds-alt-text="An example placeholder image"
                    eds-width="300"
                    eds-height="200"
                >
                    <span slot="caption">
                        This is a sample HTML caption for the Image Component.<sup><a href="#fn-01">&dagger;</a></sup>
                    </span>
                </eds-image>',
                label: "Slotted caption"
            }
        ],
        code_snippet_source=caption_text_example_source,
        preformatted=true
    ) }}

    {% filter markdown %}
    ## Shape variants

    The image can be displayed in three shapes: default, round, and circle. When using the circle shape, ensure that the `eds-width` and `eds-height` attributes are provided and are the same value.
    {% endfilter %}

    {% set shape_example_source %}
        <!-- Default -->
        <eds-image
            eds-src="https://placehold.co/300x200?text=Default+Variant"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
            eds-caption-text="This is a sample text caption for the default variant of the Image Component."
        ></eds-image>

        <!-- Round -->
        <eds-image
            eds-src="https://placehold.co/300x200?text=Round+Variant"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
            eds-variant="round"
            eds-caption-text="This is a sample text caption for the round variant of the Image Component."
        ></eds-image>

        <!-- Circle -->
        <eds-image
            eds-src="https://placehold.co/300x300?text=Circle+Variant"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="300"
            eds-caption-text="This is a sample text caption for the circle variant of the Image Component."
            eds-variant="circle"
        ></eds-image>
    {% endset %}

    {{ library.eds_code_example_pair(
        examples=[
            {
                example: '<eds-image
                    eds-src="https://placehold.co/300x200?text=Default+Variant"
                    eds-alt-text="An example placeholder image"
                    eds-width="300"
                    eds-height="200"
                    eds-caption-text="This is a sample text caption for the default variant of the Image Component."
                ></eds-image>',
                label: "Default"
            },
            {
                example: '<eds-image
                    eds-src="https://placehold.co/300x200?text=Round+Variant"
                    eds-alt-text="An example placeholder image"
                    eds-width="300"
                    eds-height="200"
                    eds-variant="round"
                    eds-caption-text="This is a sample text caption for the round variant of the Image Component."
                ></eds-image>',
                label: "Round"
            },
            {
                example: '<eds-image
                    eds-src="https://placehold.co/300x300?text=Circle+Variant"
                    eds-alt-text="An example placeholder image"
                    eds-width="300"
                    eds-height="300"
                    eds-caption-text="This is a sample text caption for the circle variant of the Image Component."
                    eds-variant="circle"
                ></eds-image>',
                label: "Circle"
            }
        ],
        code_snippet_source=shape_example_source,
        preformatted=true
    ) }}

    {% filter markdown %}
    ## Responsive sizing

    The component has the ability to provide images at multiple qualities and sizes combined with their corresponding media queries for determining which image to display. This is added in combination with the `eds-src` attribute which is required.
    {% endfilter %}

    {{ library.eds_code_example_pair(
        example= '<eds-image
            eds-src="https://placehold.co/300x200?text=Default+Image"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
            eds-variant="round"
            eds-sources=\'[{"media":"(max-width: 600px)","srcset":"https://placehold.co/600x400?text=Source+1+Image"},{"media":"(min-width: 900px)","srcset":"https://placehold.co/900x600?text=Source+2+Image"}]\'

        ></eds-image>',
        example_label="basic usage",
        code_snippet_source='<eds-image
            eds-src="https://placehold.co/300x200?text=Default+Image"
            eds-alt-text="An example placeholder image"
            eds-width="300"
            eds-height="200"
            eds-variant="round"
            eds-sources=\'[{"media":"(max-width: 600px)","srcset":"https://placehold.co/600x400?text=Source+1+Image"},{"media":"(min-width: 900px)","srcset":"https://placehold.co/900x600?text=Source+2+Image"}]\'
        ></eds-image>'
    ) }}

{% endblock %}

{% block design_tab %}
    {% filter markdown %}
    You can view the Enterprise Design System (FDS) <eds-link eds-new-window eds-href="https://design.xyz.com/fds/web/content/image/#visual-design-specifications">design guidance</eds-link> for this component.
    {% endfilter %}
{% endblock %}

{% block code_tab %}
    {% filter markdown %}
    ## Installation
    {% include "src/templates/partials/integration.njk" %}

    ## Attributes
    {% endfilter %}
    {% include "src/templates/partials/jsProps.njk" %}
    {% filter markdown %}
        
    | Attribute          | Type          | Validation                  | Default  | Description |
    | -------------------| ------------- | --------------------------- | -------- | ----------- |
    | `eds-alt-text`     | string        | --                          | --       | Alternate text used for accessibility or when an image path is incorrect and the image can't be loaded. |
    | `eds-caption-text` | string        | --                          | --       | Caption text to display below the image. If HTML needs to be used, use the `caption` slot instead. If both `eds-caption-text` and `caption` slot have a value, the slot will be displayed. |
    | `eds-height`       | string        | --                          | --       | The height to display the image. If the image is taller than the value provided (keeping the same aspect ratio in relation to `eds-width`), then the image will display with the height in proportion to `eds-width` even if it is larger than the value provided for `eds-height`. |
    | `eds-sources`      | ImageSource[] | --                          | --       | A stringified array of <eds-link eds-href="/components/image/image.html?tab=code#imagesource">ImageSource objects</eds-link> to display along with the media queries for when to display which option. If no media queries are matches for any provided sources, `eds-src` will be used. |
    | `eds-src`          | string        | --                          | --       | Path to the default image to display if no sources are provided or match. If no value is provided for this attribute or `eds-sources` then nothing will display. |
    | `eds-variant`      | string        | 'square', 'round', 'circle' | 'square' | The shape of the image. When using circle, ensure that the provided image has the same width and height and that the `eds-width` and `eds-height` are set to the same value. |
    | `eds-width`        | string        | --                          | --       | The width to display the image. |

    ## ImageSource
    An object representing the shape of the info that is used to generate a `<source>` tag within the component's `<picture>` tag.

    | Key             | Type   | Validation | Default | Description |
    | --------------- | ------ | ---------- | ------- | ----------- |
    | `height`        | string | --         | --      | Height of the source image. |
    | `media`         | string | --         | --      | Media query to test for whether to pick this source image for display when compared truthy and compared against the other truthy media queries for the other sources. |
    | `sizes`         | string | --         | --      | Sizes that the source image is available in. |
    | `srcset`        | string | --         | --      | Comma-separated list of one or more source image paths and their descriptors. |
    | `type`          | string | --         | --      | The mime type of the source image. |
    | `width`         | string | --         | --      | Width of the source image. |
    | `[key: string]` | string | --         | --      | Other attributes to render on the source's tag that are not listed as properties above. |

    ## Slots

    | Name      | Default content                          | Description |
    | --------- | ---------------------------------------- | ----------- |
    | `caption` | If set, the value of `eds-caption-text`. | When HTML content is required for the caption, the slot should be used. |

    ## Events
    The Image component does not emit any custom events.

    ## Methods
    The Image component does not implement any public methods.

    ## CSS Modifier classes
    {% include "src/templates/partials/cssModifiers.njk" %}

    | Class name          | Applies to        | Outcome |
    | ------------------- | ----------------- | ------- |
    | `eds-image--circle` | `.eds-image-root` | Adjusts the border radius of the corners to display the image as a circle. Ensure that the height and width of the source image are the same and that the `height` and `width` attributes of the `<img>` tag are the same. |
    | `eds-image--round`  | `.eds-image-root` | Adjusts the border radius of the corners to be rounded. |
    | `eds-image--square` | `.eds-image-root` | Adjusts the border radius of the corners to be squared. |
    {% endfilter %}

    {% set namespace_example_wc %}
        <eds3-image></eds3-image>
    {% endset %}

    {% set namespace_example_html %}
        <figure class="eds3-image-root">...</figure>
    {% endset %}

    {{ library.namespacing(component_name="Image", root_class="image-root", namespace_example_wc=namespace_example_wc, namespace_example_html=namespace_example_html) }}

    {# IMPORT REFERENCE #}

    {% set js_import_table %}
| Import                                                                          | Required |
| ------------------------------------------------------------------------------- | --- |
| `import { edsImage } from '@xyz-ap153177/apex-kit';`                            | Yes |
    {% endset %}

    {{ library.import_reference(component_name="Image", js_import_table=js_import_table) }}
{% endblock %}

{% block a11y_tab %}
    {% filter markdown %}
    ## Accessibility considerations

    - When possible, the `eds-alt-text` property should be included and contain relevant alt text for use on the image
    - When necessary or useful, the caption text should be included via the `eds-caption-text` attribute for text only captions or the `captions` slot for captions that contain HTML

    ## Implementation
    {% endfilter %}
    {{ library.eds_accessibility()}}
{% endblock %}
