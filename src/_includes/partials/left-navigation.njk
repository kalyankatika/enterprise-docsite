{% set currentUrl = page.url %}

<nav class="nav-main left-navigation" aria-label="Main navigation">
  <div class="space-y-6">
    {# Main navigation sections #}
    <div class="space-y-2">
      <h3 class="font-medium text-sm uppercase text-[var(--color-text-muted)]">Main Sections</h3>
      <ul class="space-y-2">
        {# Home Link #}
        <li>
          <a href="/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/' %}text-[var(--color-primary)] font-medium{% endif %}">
            Home
          </a>
        </li>

        {# Design System with submenu #}
        <li class="nav-item">
          <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/design-system') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/design-system/') %}true{% else %}false{% endif %}" aria-controls="design-system-submenu">
            <span>Design System</span>
            <span class="chevron-icon">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
          <ul id="design-system-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/design-system/') %}hidden{% endif %}">
            {# Foundations with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/design-system/foundations/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/design-system/foundations/') %}true{% else %}false{% endif %}" aria-controls="foundations-submenu">
                <span>Foundations</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="foundations-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/design-system/foundations/') %}hidden{% endif %}">
                <li>
                  <a href="/design-system/foundations/colors/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/design-system/foundations/colors/' %}text-[var(--color-primary)] font-medium{% endif %}">
                    Colors
                  </a>
                </li>
                <li>
                  <a href="/design-system/foundations/typography/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/design-system/foundations/typography/' %}text-[var(--color-primary)] font-medium{% endif %}">
                    Typography
                  </a>
                </li>
                <li>
                  <a href="/design-system/foundations/spacing/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/design-system/foundations/spacing/' %}text-[var(--color-primary)] font-medium{% endif %}">
                    Spacing
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </li>

        {# Components with submenu #}
        <li class="nav-item">
          <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/') %}true{% else %}false{% endif %}" aria-controls="components-submenu">
            <span>Components</span>
            <span class="chevron-icon">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
          <ul id="components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/') %}hidden{% endif %}">
            {# All Components with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/all/') %}true{% else %}false{% endif %}" aria-controls="all-components-submenu">
                <span>All</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="all-components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/all/') %}hidden{% endif %}">
                <li>
                  <a href="/components/all/alert/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/alert/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Alert
                  </a>
                </li>
                <li>
                  <a href="/components/all/breadcrumbs/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/breadcrumbs/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Breadcrumbs
                  </a>
                </li>
                <li>
                  <a href="/components/all/button/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/button/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Button
                  </a>
                </li>
                <li>
                  <a href="/components/all/checkbox/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/checkbox/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Checkbox
                  </a>
                </li>
                <li>
                  <a href="/components/all/checkbox-group/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/checkbox-group/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Checkbox Group
                  </a>
                </li>
                <li>
                  <a href="/components/all/chip/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/chip/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Chip
                  </a>
                </li>
                <li>
                  <a href="/components/all/content-block/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/content-block/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Content Block
                  </a>
                </li>
                <li>
                  <a href="/components/all/description-list/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/description-list/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Description List
                  </a>
                </li>
                <li>
                  <a href="/components/all/expand-collapse/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/expand-collapse/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Expand Collapse
                  </a>
                </li>
                <li>
                  <a href="/components/all/field-group/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/field-group/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Field Group
                  </a>
                </li>
                <li>
                  <a href="/components/all/field-key/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/field-key/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Field Key
                  </a>
                </li>
                <li>
                  <a href="/components/all/file-upload/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/file-upload/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    File Upload
                  </a>
                </li>
                <li>
                  <a href="/components/all/form-actions/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/form-actions/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Form Actions
                  </a>
                </li>
                <li>
                  <a href="/components/all/grid/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/grid/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Grid
                  </a>
                </li>
                <li>
                  <a href="/components/all/icon/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/icon/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Icon
                  </a>
                </li>
                <li>
                  <a href="/components/all/image/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/image/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Image
                  </a>
                </li>
                <li>
                  <a href="/components/all/inline-alert/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/inline-alert/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Inline Alert
                  </a>
                </li>
                <li>
                  <a href="/components/all/input/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/input/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Input
                  </a>
                </li>
                <li>
                  <a href="/components/all/label/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/label/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Label
                  </a>
                </li>
                <li>
                  <a href="/components/all/link/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/link/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Link
                  </a>
                </li>
                <li>
                  <a href="/components/all/list-group/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/list-group/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    List Group
                  </a>
                </li>
                <li>
                  <a href="/components/all/menu/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/menu/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Menu
                  </a>
                </li>
                <li>
                  <a href="/components/all/modal/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/modal/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Modal
                  </a>
                </li>
                <li>
                  <a href="/components/all/progress-indicator/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/progress-indicator/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Progress Indicator
                  </a>
                </li>
                <li>
                  <a href="/components/all/radio/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/radio/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Radio
                  </a>
                </li>
                <li>
                  <a href="/components/all/radio-group/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/radio-group/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Radio Group
                  </a>
                </li>
                <li>
                  <a href="/components/all/select/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/select/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Select
                  </a>
                </li>
                <li>
                  <a href="/components/all/switch/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/switch/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Switch
                  </a>
                </li>
                <li>
                  <a href="/components/all/tab-group/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/tab-group/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Tab Group
                  </a>
                </li>
                <li>
                  <a href="/components/all/table/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/table/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Table
                  </a>
                </li>
                <li>
                  <a href="/components/all/textarea/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/textarea/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Textarea
                  </a>
                </li>
                <li>
                  <a href="/components/all/toast/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/toast/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Toast
                  </a>
                </li>
                <li>
                  <a href="/components/all/tooltip/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/all/tooltip/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Tooltip
                  </a>
                </li>
              </ul>
            </li>
            
            {# Layout Components with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/layout/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/layout/') %}true{% else %}false{% endif %}" aria-controls="layout-components-submenu">
                <span>Layout</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="layout-components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/layout/') %}hidden{% endif %}">
                <li>
                  <a href="/components/layout/accordion/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/layout/accordion/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Accordion
                  </a>
                </li>
                <li>
                  <a href="/components/layout/container/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/layout/container/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Container
                  </a>
                </li>
                <li>
                  <a href="/components/layout/divider/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/layout/divider/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Divider
                  </a>
                </li>
              </ul>
            </li>
            
            {# Navigation Components with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/navigation/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/navigation/') %}true{% else %}false{% endif %}" aria-controls="navigation-components-submenu">
                <span>Navigation</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="navigation-components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/navigation/') %}hidden{% endif %}">
                <li>
                  <a href="/components/navigation/pagination/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/navigation/pagination/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Pagination
                  </a>
                </li>
                <li>
                  <a href="/components/navigation/tabs/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/navigation/tabs/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Tabs
                  </a>
                </li>
              </ul>
            </li>
            
            {# Feedback Components with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/feedback/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/feedback/') %}true{% else %}false{% endif %}" aria-controls="feedback-components-submenu">
                <span>Feedback</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="feedback-components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/feedback/') %}hidden{% endif %}">
                <li>
                  <a href="/components/feedback/loading-spinner/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/feedback/loading-spinner/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Loading Spinner
                  </a>
                </li>
                <li>
                  <a href="/components/feedback/badge/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/feedback/badge/') %}text-[var(--color-primary)] font-medium{% endif %}">
                    Badge
                  </a>
                </li>
              </ul>
            </li>
            
            {# Inputs Components with submenu #}
            <li class="nav-item">
              <button type="button" class="nav-toggle w-full flex items-center justify-between py-1 text-left hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/inputs/') %}text-[var(--color-primary)] font-medium{% endif %}" aria-expanded="{% if currentUrl.includes('/components/inputs/') %}true{% else %}false{% endif %}" aria-controls="inputs-components-submenu">
                <span>Inputs</span>
                <span class="chevron-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <ul id="inputs-components-submenu" class="nav-submenu ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1 {% if not currentUrl.includes('/components/inputs/') %}hidden{% endif %}">
                {% for component in collections.inputComponents %}
                  <li>
                    <a href="{{ component.url }}" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == component.url %}text-[var(--color-primary)] font-medium{% endif %}">
                      {{ component.data.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </li>
          </ul>
        </li>
        
        {# Browse Functionality #}
        <li>
          <a href="/navigation/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/navigation/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Browse</span>
            <span class="text-xs">
              {% if currentUrl.includes('/navigation/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/navigation/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/navigation/by-type/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/navigation/by-type/' %}text-[var(--color-primary)] font-medium{% endif %}">
                By Type
              </a>
            </li>
            <li>
              <a href="/navigation/by-channel/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/navigation/by-channel/' %}text-[var(--color-primary)] font-medium{% endif %}">
                By Channel
              </a>
            </li>
            <li>
              <a href="/navigation/by-owner/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/navigation/by-owner/' %}text-[var(--color-primary)] font-medium{% endif %}">
                By Owner
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
        
        {# Guidelines #}
        <li>
          <a href="/guidelines/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/guidelines/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Guidelines</span>
            <span class="text-xs">
              {% if currentUrl.includes('/guidelines/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/guidelines/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/guidelines/usage/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/guidelines/usage/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Usage Guidelines
              </a>
            </li>
            <li>
              <a href="/guidelines/accessibility/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/guidelines/accessibility/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Accessibility
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
        
        {# Guides #}
        <li>
          <a href="/guides/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/guides/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Guides</span>
            <span class="text-xs">
              {% if currentUrl.includes('/guides/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/guides/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/guides/migration-guide/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/guides/migration-guide/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Migration Guide
              </a>
            </li>
            <li>
              <a href="/guides/component-documentation/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/guides/component-documentation/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Component Documentation
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
        
        {# Resources #}
        <li>
          <a href="/resources/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/resources/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Resources</span>
            <span class="text-xs">
              {% if currentUrl.includes('/resources/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/resources/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/resources/migration-tools/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/resources/migration-tools/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Migration Tools
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
        
        {# Legacy Docs #}
        <li>
          <a href="/legacy-docs/njk/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/legacy-docs/njk/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Legacy Docs</span>
            <span class="text-xs">
              {% if currentUrl.includes('/legacy-docs/njk/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/legacy-docs/njk/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/legacy-docs/njk/legacy-component/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/legacy-docs/njk/legacy-component/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Legacy Component
              </a>
            </li>
            <li>
              <a href="/legacy-docs/njk/legacy-page/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/legacy-docs/njk/legacy-page/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Legacy Page
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
        
        {# Migration Examples #}
        <li>
          <a href="/components/shared/migration-examples/" class="flex items-center justify-between py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl.includes('/components/shared/migration-examples/') %}text-[var(--color-primary)] font-medium{% endif %}">
            <span>Migration Examples</span>
            <span class="text-xs">
              {% if currentUrl.includes('/components/shared/migration-examples/') %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              {% endif %}
            </span>
          </a>
          {% if currentUrl.includes('/components/shared/migration-examples/') %}
          <ul class="ml-4 space-y-1 border-l border-[var(--color-border)] pl-2 mt-1">
            <li>
              <a href="/components/shared/migration-examples/legacy-component-preserved/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/components/shared/migration-examples/legacy-component-preserved/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Legacy Component Preserved
              </a>
            </li>
            <li>
              <a href="/components/shared/migration-examples/legacy-page-converted/" class="block py-1 hover:text-[var(--color-primary)] transition-colors {% if currentUrl == '/components/shared/migration-examples/legacy-page-converted/' %}text-[var(--color-primary)] font-medium{% endif %}">
                Page Converted
              </a>
            </li>
          </ul>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
// Simple navigation toggle script - directly embedded in the page
(function() {
  // Execute immediately when the script loads
  setupNavigation();

  // Main function to set up the navigation
  function setupNavigation() {
    // Get all toggle buttons on the page
    let toggleButtons = document.querySelectorAll('button.nav-toggle');
    console.log('Found ' + toggleButtons.length + ' toggle buttons');
    
    // Add click handlers to each button
    toggleButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        // Get the current expanded state
        let isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        // Get the target menu
        let targetId = this.getAttribute('aria-controls');
        let targetMenu = document.getElementById(targetId);
        
        // Log for debugging
        console.log('Toggle clicked: ' + targetId + ', current state: ' + (isExpanded ? 'expanded' : 'collapsed'));
        
        // Toggle the expanded state
        this.setAttribute('aria-expanded', !isExpanded);
        
        // Toggle the submenu visibility
        if (targetMenu) {
          if (isExpanded) {
            // If expanded, hide it
            targetMenu.classList.add('hidden');
            
            // Rotate chevron down
            let chevron = this.querySelector('.chevron-icon svg');
            if (chevron) {
              chevron.innerHTML = '<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />';
            }
          } else {
            // If collapsed, show it
            targetMenu.classList.remove('hidden');
            
            // Rotate chevron up
            let chevron = this.querySelector('.chevron-icon svg');
            if (chevron) {
              chevron.innerHTML = '<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />';
            }
          }
        }
      });
    });
  }
  
  // Also add a DOMContentLoaded handler as a backup
  document.addEventListener('DOMContentLoaded', setupNavigation);
})();
</script>