<div class="fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 md:translate-x-0 hidden md:block pt-16">
  <div class="h-full overflow-y-auto py-4 px-4">
    <nav class="space-y-8" aria-label="Sidebar">
      {% set navPages = collections.all | eleventyNavigation %}
      {% for entry in navPages %}
        <div>
          <h3 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider">
            {{ entry.title }}
          </h3>
          {% if entry.children.length %}
            <ul class="mt-3 space-y-2">
              {% for child in entry.children %}
                <li>
                  <a href="{{ child.url }}" class="flex items-center px-3 py-2 text-sm rounded-md {% if page.url == child.url %}bg-primary-50 text-primary-700 dark:bg-primary-900 dark:text-primary-400{% else %}text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white{% endif %}">
                    {{ child.title }}
                  </a>
                  
                  {% if child.children.length and page.url.startsWith(child.url) %}
                    <ul class="mt-1 ml-4 space-y-1">
                      {% for grandchild in child.children %}
                        <li>
                          <a href="{{ grandchild.url }}" class="flex items-center px-3 py-1 text-sm rounded-md {% if page.url == grandchild.url %}text-primary-700 font-medium dark:text-primary-400{% else %}text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white{% endif %}">
                            {{ grandchild.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      {% endfor %}
    </nav>
  </div>
</div>