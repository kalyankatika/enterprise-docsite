<nav class="eds-sidebar-nav" aria-label="Sidebar">
  <!-- Main Sections Navigation -->
  <div class="space-y-6">
    {% for section in navigation.sidebar %}
      <div>
        <h3 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
          {{ section.title }}
        </h3>
        
        <ul class="mt-3 space-y-1">
          {% for item in section.items %}
            <li>
              {% if item.children %}
                <!-- Collapsible section with children -->
                <div x-data="{ open: {{ 'true' if page.url.startsWith(item.url) else 'false' }} }">
                  <button 
                    @click="open = !open" 
                    class="w-full flex items-center justify-between px-3 py-2 text-sm rounded-md
                    {% if page.url.startsWith(item.url) %}
                      text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20
                    {% else %}
                      text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/20
                    {% endif %}
                    "
                  >
                    <span class="flex items-center">
                      {% if item.icon %}
                        <span class="mr-2">{{ item.icon | safe }}</span>
                      {% endif %}
                      {{ item.title }}
                    </span>
                    
                    <!-- Chevron icon -->
                    <svg 
                      class="ml-2 h-4 w-4 transform transition-transform duration-200" 
                      :class="{'rotate-90': open}"
                      xmlns="http://www.w3.org/2000/svg" 
                      fill="none" 
                      viewBox="0 0 24 24" 
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                  </button>
                  
                  <!-- Children items -->
                  <ul
                    x-show="open"
                    x-transition:enter="transition ease-out duration-100"
                    x-transition:enter-start="transform opacity-0 scale-95"
                    x-transition:enter-end="transform opacity-100 scale-100"
                    x-transition:leave="transition ease-in duration-75"
                    x-transition:leave-start="transform opacity-100 scale-100"
                    x-transition:leave-end="transform opacity-0 scale-95"
                    class="pl-6 mt-1 space-y-1"
                  >
                    {% for child in item.children %}
                      <li>
                        <a 
                          href="{{ child.url }}" 
                          class="block px-3 py-2 text-sm rounded-md
                          {% if page.url == child.url %}
                            text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20
                          {% else %}
                            text-gray-700 dark:text-gray-300 hover:text-green-700 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700/20
                          {% endif %}
                          "
                        >
                          {{ child.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              {% else %}
                <!-- Regular item -->
                <a 
                  href="{{ item.url }}" 
                  class="block px-3 py-2 text-sm rounded-md
                  {% if page.url == item.url %}
                    text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20
                  {% else %}
                    text-gray-700 dark:text-gray-300 hover:text-green-700 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700/20
                  {% endif %}
                  "
                >
                  {% if item.icon %}
                    <span class="mr-2 inline-block">{{ item.icon | safe }}</span>
                  {% endif %}
                  {{ item.title }}
                </a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  </div>
  
  <!-- Version Selector -->
  {% if site.versions and site.versions.length > 1 %}
    <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
      <div class="flex items-center justify-between">
        <label for="version-selector" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
          Version
        </label>
        <select 
          id="version-selector"
          class="block w-full mt-1 pl-3 pr-10 py-1 text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200"
          onchange="window.location.href = this.value"
        >
          {% for version in site.versions %}
            <option value="{{ version.url }}" {% if version.current %}selected{% endif %}>
              {{ version.label }}
            </option>
          {% endfor %}
        </select>
      </div>
    </div>
  {% endif %}
</nav>